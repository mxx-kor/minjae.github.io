<!DOCTYPE html><html lang="ko" class="scroll-smooth"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:locale" content="ko-KR"/><meta property="og:site_name" content="minjae blog"/><meta name="author" content="Minjae Kim"/><title>Next.js App Router 페이지 이동 막기</title><meta name="robots" content="index,follow"/><meta name="description" content="페이지 이동을 감지하고 confirm창을 띄우는기 위해 적용한 내용을 다룹니다."/><meta property="og:title" content="Next.js App Router 페이지 이동 막기"/><meta property="og:description" content="페이지 이동을 감지하고 confirm창을 띄우는기 위해 적용한 내용을 다룹니다."/><meta property="og:url" content="https://mxx-kor.github.io/blog/confirm-leaving-page"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2024-02-19T12:22:00.000Z"/><meta property="article:modified_time" content="2024-02-20T06:59:00.000Z"/><meta property="article:author" content="https://github.com/mxx-kor"/><meta property="article:tag" content="Next.js"/><meta property="og:image" content="https://avatars.githubusercontent.com/u/82329983?v=4"/><meta property="og:image:width" content="285"/><meta property="og:image:height" content="167"/><link rel="canonical" href="https://mxx-kor.github.io/blog/confirm-leaving-page"/><meta name="next-head-count" content="20"/><meta name="google-site-verification" content="XJtOBpU5U3tModhdmzxqFas0xo0_saGhnWxPEAC-NHk"/><link rel="preload" href="/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/de5f35e2b8d4bc52-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/91d855b67a63e74f-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/ae11f023272d3641-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/bff605305ca72295-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/0bb6dc123aa42fb6-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/css/61cc7115f3689ea3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/61cc7115f3689ea3.css" data-n-g=""/><link rel="preload" href="/_next/static/css/3236e1a678526afc.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3236e1a678526afc.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script defer="" src="/_next/static/chunks/3607272e.2e699c1bc0d79620.js"></script><script defer="" src="/_next/static/chunks/853.cf688abe519004d8.js"></script><script defer="" src="/_next/static/chunks/794.2b85bc94a9efc2f7.js"></script><script src="/_next/static/chunks/webpack-67524068141b916b.js" defer=""></script><script src="/_next/static/chunks/framework-305cb810cde7afac.js" defer=""></script><script src="/_next/static/chunks/main-34577be56dd3d97c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a92c6c5f9eb7f8c3.js" defer=""></script><script src="/_next/static/chunks/239-569a8cd56c4de129.js" defer=""></script><script src="/_next/static/chunks/551-b3fc15b50b249083.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-12e204b17f2da5c2.js" defer=""></script><script src="/_next/static/WlhzeYVbyEpNQD72Ivis5/_buildManifest.js" defer=""></script><script src="/_next/static/WlhzeYVbyEpNQD72Ivis5/_ssgManifest.js" defer=""></script><style id="__jsx-399773665">:root{--font-sans:'__Inter_d9825c', '__Inter_Fallback_d9825c';--font-spoqa:'__fontSpoqa_fca923', '__fontSpoqa_Fallback_fca923'}</style></head><body class="text-primary bg-primary transition-[background]"><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="container mx-auto max-w-screen-md px-6 font-spoqa"><header class="flex justify-between py-6"><ul class="flex items-center gap-4"><li class="font-sans font-medium"><a class="text-tertiary hover:text-secondary" href="/">Home</a></li><li class="font-sans font-medium"><a class="text-primary font-bold hover:text-secondary" href="/blog">Blog</a></li><li class="font-sans font-medium"><a class="text-tertiary hover:text-secondary" href="/archives">Archives</a></li><li class="font-sans font-medium"><a class="text-tertiary hover:text-secondary" href="/about">About</a></li></ul></header><div class="fixed left-0 top-0 z-10 h-1.5 w-full origin-top-left bg-gradient-to-r from-blue-400 to-sky-600 dark:from-stone-700 dark:to-stone-200" style="transform:scaleX(0) translateZ(0)"></div><a class="mb-6 inline-block" href="/blog"><button aria-label="Back to posts" type="button" class="hover:bg-secondary flex h-9 items-center justify-center rounded-lg transition-all w-32"><div class="flex items-center text-md gap-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="14" width="14" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"></path><path d="M8 7v4L2 6l6-5v4h5a8 8 0 1 1 0 16H4v-2h9a6 6 0 1 0 0-12H8z"></path></g></svg><span>Back to posts</span></div></button></a><article><aside class="sticky top-12 hidden xl:block"><div class="absolute left-full w-64 rounded-2xl p-4"><h2 class="tracking-tight mb-4 text-lg font-bold">목차</h2><ul class="mb-2"><li class="mb-1 font-light tracking-tighter"><a class="text-mute hover:text-primary inline-block transition-all text-base hover:font-normal" href="/blog/confirm-leaving-page#3fe164a109f14ce0870ab3b677c9098b">어떤 동작을 감지해야 할까?</a></li><li class="mb-1 font-light tracking-tighter"><a class="text-mute hover:text-primary inline-block transition-all ml-4 text-sm hover:font-normal" href="/blog/confirm-leaving-page#5c99463d49e64cffa0ff6c2a44864f00">페이지 이동 (내부, 외부 통합)</a></li><li class="mb-1 font-light tracking-tighter"><a class="text-mute hover:text-primary inline-block transition-all ml-10 text-sm hover:font-normal" href="/blog/confirm-leaving-page#b3855b9de9bc4698b714c8c9b92c2c3f">코드</a></li><li class="mb-1 font-light tracking-tighter"><a class="text-mute hover:text-primary inline-block transition-all ml-4 text-sm hover:font-normal" href="/blog/confirm-leaving-page#38ad374af25b495aae09e5f34d5b443b">뒤로 가기 버튼</a></li><li class="mb-1 font-light tracking-tighter"><a class="text-mute hover:text-primary inline-block transition-all ml-10 text-sm hover:font-normal" href="/blog/confirm-leaving-page#6ca3e897a8b74ee581cf4281a6ac3616">코드</a></li><li class="mb-1 font-light tracking-tighter"><a class="text-mute hover:text-primary inline-block transition-all text-base hover:font-normal" href="/blog/confirm-leaving-page#f6ab7be77de941cdb3a23e4a37ee2c97">마치며</a></li><li class="mb-1 font-light tracking-tighter"><a class="text-mute hover:text-primary inline-block transition-all ml-4 text-sm hover:font-normal" href="/blog/confirm-leaving-page#88a51eca06794ba39cf8a541fe6d7c01">참조</a></li></ul><div class="bg-tag flex w-44 justify-between gap-2 rounded-xl px-4"><a href="/blog"><button aria-label="icon-button" type="button" class="hover:bg-secondary flex h-9 w-9 items-center justify-center rounded-lg transition-all"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"></path><path d="M8 7v4L2 6l6-5v4h5a8 8 0 1 1 0 16H4v-2h9a6 6 0 1 0 0-12H8z"></path></g></svg></button></a><button aria-label="icon-button" type="button" class="hover:bg-secondary flex h-9 w-9 items-center justify-center rounded-lg transition-all"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="22" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 0 0-12.6 0l-112 141.7a7.98 7.98 0 0 0 6.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"></path></svg></button><button aria-label="icon-button" type="button" class="hover:bg-secondary flex h-9 w-9 items-center justify-center rounded-lg transition-all"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="22" width="22" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"></path><path d="M14 22.5L11.2 19H6a1 1 0 0 1-1-1V7.103a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1V18a1 1 0 0 1-1 1h-5.2L14 22.5zm1.839-5.5H21V8.103H7V17H12.161L14 19.298 15.839 17zM2 2h17v2H3v11H1V3a1 1 0 0 1 1-1z"></path></g></svg></button></div></div></aside><section><h1 class="mb-2 break-keep text-center text-3xl font-bold">Next.js App Router 페이지 이동 막기</h1><div class="flex items-center gap-1 text-tertiary mb-2 justify-center text-sm"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="14" width="14" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg><span>2024.02.19</span></div><div class="mb-4 flex justify-center gap-2"><a href="/archives/tags/Next.js"><span class="inline-flex items-center rounded-md px-2 py-1 text-tertiary bg-tag text-xs font-medium hover:bg-secondary ring-1 ring-inset ring-gray-500/10 transition-all">Next.js</span></a></div></section><section class="transition-all xl:hidden"><hr class="border-neutral-300 w-full border-1 mb-4 dark:border-neutral-400"/><h2 class="text-2xl font-bold tracking-tight mb-2 px-2"><div class="flex items-center gap-3 text-xl font-bold"><svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 24 24" height="25" width="25" xmlns="http://www.w3.org/2000/svg"><path d="M2 8C2 7.44772 2.44772 7 3 7H21C21.5523 7 22 7.44772 22 8C22 8.55228 21.5523 9 21 9H3C2.44772 9 2 8.55228 2 8Z" fill="currentColor"></path><path d="M2 12C2 11.4477 2.44772 11 3 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H3C2.44772 13 2 12.5523 2 12Z" fill="currentColor"></path><path d="M3 15C2.44772 15 2 15.4477 2 16C2 16.5523 2.44772 17 3 17H15C15.5523 17 16 16.5523 16 16C16 15.4477 15.5523 15 15 15H3Z" fill="currentColor"></path></svg><span>Table of Contents</span></div></h2><ul class="px-2"><li class="mb-1 tracking-tighter"><a class="text-mute hover:text-primary inline-block transition-all" href="/blog/confirm-leaving-page#3fe164a109f14ce0870ab3b677c9098b"><div class="flex items-center gap-1 text-base"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="30" width="30" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8 9.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" clip-rule="evenodd"></path></svg><span>어떤 동작을 감지해야 할까?</span></div></a></li><li class="mb-1 tracking-tighter"><a class="text-mute hover:text-primary inline-block transition-all" href="/blog/confirm-leaving-page#5c99463d49e64cffa0ff6c2a44864f00"><div class="flex items-center gap-1 ml-8 text-sm"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="30" width="30" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8 9.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" clip-rule="evenodd"></path></svg><span>페이지 이동 (내부, 외부 통합)</span></div></a></li><li class="mb-1 tracking-tighter"><a class="text-mute hover:text-primary inline-block transition-all" href="/blog/confirm-leaving-page#b3855b9de9bc4698b714c8c9b92c2c3f"><div class="flex items-center gap-1 ml-16 text-sm"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="30" width="30" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8 9.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" clip-rule="evenodd"></path></svg><span>코드</span></div></a></li><li class="mb-1 tracking-tighter"><a class="text-mute hover:text-primary inline-block transition-all" href="/blog/confirm-leaving-page#38ad374af25b495aae09e5f34d5b443b"><div class="flex items-center gap-1 ml-8 text-sm"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="30" width="30" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8 9.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" clip-rule="evenodd"></path></svg><span>뒤로 가기 버튼</span></div></a></li><li class="mb-1 tracking-tighter"><a class="text-mute hover:text-primary inline-block transition-all" href="/blog/confirm-leaving-page#6ca3e897a8b74ee581cf4281a6ac3616"><div class="flex items-center gap-1 ml-16 text-sm"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="30" width="30" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8 9.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" clip-rule="evenodd"></path></svg><span>코드</span></div></a></li><li class="mb-1 tracking-tighter"><a class="text-mute hover:text-primary inline-block transition-all" href="/blog/confirm-leaving-page#f6ab7be77de941cdb3a23e4a37ee2c97"><div class="flex items-center gap-1 text-base"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="30" width="30" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8 9.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" clip-rule="evenodd"></path></svg><span>마치며</span></div></a></li><li class="mb-1 tracking-tighter"><a class="text-mute hover:text-primary inline-block transition-all" href="/blog/confirm-leaving-page#88a51eca06794ba39cf8a541fe6d7c01"><div class="flex items-center gap-1 ml-8 text-sm"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="30" width="30" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8 9.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" clip-rule="evenodd"></path></svg><span>참조</span></div></a></li></ul></section><main class="notion dark-mode notion-page notion-block-dfe0359104f54ff9a101b551112d7aa0"><div class="notion-viewport"></div><div class="notion-collection-page-properties"><div class="notion-collection-row"><div class="notion-collection-row-body"></div></div></div><div class="notion-text notion-block-adf5980b1bbd45e9af3af37973c6e7d7">프로젝트에 에디터를 적용하고 사용자가 페이지를 이동할 때 작성한 내용이 날아가면 허무함을 느낄 것 같아 페이지 이동 전에 confirm창을 띄워주고 싶었다. isDirty(boolean) 값을 활용해서 조건에 따라 바로 이동시키거나 확인을 거치는 기능을 구현했다.</div><div class="notion-text notion-block-95a29c0b54794d41bae0f495a688a6a4">검색 결과 Page Router를 활용할 때에는 <code class="notion-inline-code">useRouter</code>(<code class="notion-inline-code">next/router</code>)를 이용해 <code class="notion-inline-code">routeChangeStart</code>와 같은 이벤트들을 사용할 수 있었으나 13버전 이후의 App Router를 활용할 때에는 같은 <code class="notion-inline-code">useRouter</code>이지만 (Page Router도 아직 활용할 수 있기 때문에) <code class="notion-inline-code">next/navigation</code>을 활용해야 한다.  그렇지 않으면  <code class="notion-inline-code">Uncaught Error: NextRouter was not mounted.</code>와 검색해도 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://nextjs.org/docs/messages/next-router-not-mounted">불친절한 설명</a>을 보게 된다.</div><div class="notion-text notion-block-4fe608c2ad02467fb9c69db11ce05673">이를 해결한 과정과 무섭게 들리는 “막기” 보다는 이동 전에 확인 받기 기능을 구현하며 작성한 내용에 대해 다뤄보고자 한다.</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-0dd7b966cb27459b8927a1ebfda438b8"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:336px;max-width:100%;flex-direction:column"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F7b0c1ebf-29f7-4bde-9810-55e79a3d582e%2F0b008854-a087-4fe1-9fce-773ab38425d2%2F%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-02-19_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_9.32.26.png?table=block&amp;id=0dd7b966-cb27-459b-8927-a1ebfda438b8&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-blank notion-block-c4a1462080704ba5ab3967549d7c835c"> </div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-3fe164a109f14ce0870ab3b677c9098b" data-id="3fe164a109f14ce0870ab3b677c9098b"><span><div id="3fe164a109f14ce0870ab3b677c9098b" class="notion-header-anchor"></div><a class="notion-hash-link" href="#3fe164a109f14ce0870ab3b677c9098b" title="어떤 동작을 감지해야 할까?"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">어떤 동작을 감지해야 할까?</span></span></h2><div class="notion-text notion-block-f18f6256b31544bba134717f9b0b2fd3">이미 해당 기능(이동 전 확인)이 존재하기 때문에 직접 구현할 수 있을 것이라고 생각했다. 구현 과정에서 크게 3가지 동작으로 분리할 수 있고 대비가 필요하다는 점을 확인했다.</div><ol start="1" class="notion-list notion-list-numbered notion-block-c86a5d1506a746388990db1c3b75fdad"><li>닫기, 새로고침, <code class="notion-inline-code">a</code> 태그 이동 (페이지 외로 이동)</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-8e2e66c4d69b44efaef41ec3b78094a9"><li><code class="notion-inline-code">router.push()</code>,  <code class="notion-inline-code">Link</code> 태그 (페이지 내로 이동)</li></ol><ol start="3" class="notion-list notion-list-numbered notion-block-817e3116a80b403f9baf90bc90fecf70"><li>뒤로 가기 버튼</li></ol><div class="notion-text notion-block-9a02f0872ab5475599d744af6f15e8b3">필요한 예방 동작에 따라 작성해야 하는 함수를 확인하면 좋을 것 같다. 추후 Next의 업데이트에 따라 Page router의 <code class="notion-inline-code">routeChangeStart</code> 이벤트와 비슷한 내용이 추가될 수 있지만 서버 컴포넌트가 기본인 설정이라 어려움이 있을 것이라고 추론하게 되었다.</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-5c99463d49e64cffa0ff6c2a44864f00" data-id="5c99463d49e64cffa0ff6c2a44864f00"><span><div id="5c99463d49e64cffa0ff6c2a44864f00" class="notion-header-anchor"></div><a class="notion-hash-link" href="#5c99463d49e64cffa0ff6c2a44864f00" title="페이지 이동 (내부, 외부 통합)"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">페이지 이동 (내부, 외부 통합)</span></span></h3><div class="notion-text notion-block-e44e9e4a39c14052bb79d217ec698444">내부, 외부(1번, 2번)를 통합해서 페이지 이동을 감지할 수 있는 함수로 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/vercel/next.js/discussions/41934#discussioncomment-8174608">이 글을 확인</a>했다. </div><div class="notion-text notion-block-a9d055fb52d84a68ad0b660f744e9f82"><code class="notion-inline-code">onbeforeunload</code> 이벤트는 외부로의(닫기, 새로고침, <code class="notion-inline-code">a</code> 태그) 이동을, <code class="notion-inline-code">router.push</code> 로직을 수정하는 방법은 내부로의 이동을 감지하고 예방할 수 있다.</div><div class="notion-text notion-block-6b17edb4d61b4921a49036f6c85f6d7b">내부 이동은 글 서론의 사진과 같은 보편적인 confirm 통해서, 외부로 이동하는 경우 Chrome에서 제공하는 못생긴(?) confirm 창을 확인할 수 있다.  </div><div class="notion-text notion-block-3cd2dd78b9df46bf8b6baf6e8a631deb"><code class="notion-inline-code">a</code> 태그도 페이지를 벗어나는 경우에 포함되므로 대비할 수 있고 여기서 확인한 내용은 <code class="notion-inline-code">Link</code> 태그와 같은 경우는 <code class="notion-inline-code">router.push()</code>처럼 처리되는 점을 알게 되었다. <s>알고 싶지 않았으나 Link는 confirm을 띄우지 않아서 알게되었다.</s></div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-123d1dd1265b4dc78ff7c23aaf15af3f"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:192px;max-width:100%;flex-direction:column"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F7b0c1ebf-29f7-4bde-9810-55e79a3d582e%2F55af6853-2c17-449c-b8a8-54e5ee463042%2F%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-02-20_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_12.44.46.png?table=block&amp;id=123d1dd1-265b-4dc7-8ff7-c23aaf15af3f&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><h4 class="notion-h notion-h3 notion-h-indent-2 notion-block-b3855b9de9bc4698b714c8c9b92c2c3f" data-id="b3855b9de9bc4698b714c8c9b92c2c3f"><span><div id="b3855b9de9bc4698b714c8c9b92c2c3f" class="notion-header-anchor"></div><a class="notion-hash-link" href="#b3855b9de9bc4698b714c8c9b92c2c3f" title="코드"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">코드</span></span></h4><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-javascript">const beforeUnloadHandler = useCallback(
  (event: BeforeUnloadEvent) =&gt; {
    // 페이지를 벗어나지 않아야 하는 경우
    if (isDirty) {
      event.preventDefault();
      event.returnValue = true;
    }
  },
  [isDirty],
);

useEffect(() =&gt; {
  const originalPush = router.push;
  const newPush = (
    href: string,
    options?: NavigateOptions | undefined,
  ): void =&gt; {
    // 페이지를 벗어나지 않아야 하는 경우
    if (isDirty &amp;&amp; href === &#x27;/&#x27; &amp;&amp; !confirm(MESSAGE.CONFIRM_LEAVE)) {
      return;
    }

    originalPush(href, options);
    return;
  };
  router.push = newPush;
  window.onbeforeunload = beforeUnloadHandler;
  return () =&gt; {
    router.push = originalPush;
    window.onbeforeunload = null;
  };
}, [isDirty, router, beforeUnloadHandler]);</code></pre><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-38ad374af25b495aae09e5f34d5b443b" data-id="38ad374af25b495aae09e5f34d5b443b"><span><div id="38ad374af25b495aae09e5f34d5b443b" class="notion-header-anchor"></div><a class="notion-hash-link" href="#38ad374af25b495aae09e5f34d5b443b" title="뒤로 가기 버튼"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">뒤로 가기 버튼</span></span></h3><div class="notion-text notion-block-c98f8987468645eb9f1a510ef2624cf2">해당 경우를 처리하는 것이 가장 복잡했다. 크게 두가지 이유가 있었다.</div><ol start="1" class="notion-list notion-list-numbered notion-block-011d3072d5944a9685f595805e8097b5"><li>popstate 이벤트는 실행취소가 불가능하다. 즉 뒤로 가기 버튼을 누른 경우  history 스택에서 현재 페이지가 빠지고 이를 막을 수 없다.</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-e7eca33fd2534dae862a311d2e8a13cb"><li>컴포넌트 마운트 시점에 현재 페이지의 정보를 저장하기 위해 useEffect에  <code class="notion-inline-code">history.pushState</code>를 사용하는데 이 동작의 예측이 어렵다.</li></ol><div class="notion-text notion-block-aabf921c42aa404d9376c3c242ed7400">1번을 해결하기 위해서 이미 history에서 빠진 현재 페이지를 다시 넣어야 하는데  <code class="notion-inline-code">go(+1)</code>를 사용하는 경우 <code class="notion-inline-code">popstate</code> 이벤트를 다시 발생시켜 무한 confirm이 된다. 이벤트를 발생시키지 않는 <code class="notion-inline-code">pushState</code> 또는<code class="notion-inline-code">replaceState</code>사용해야 한다.</div><div class="notion-text notion-block-513440319a894a3b8e9cf7fd8d221aaf">2번은 개발 환경에서만 발생하는 문제로 해당 로직을 사용하는 컴포넌트가 리렌더링 되는 것과 관련된 이슈라고 생각된다. 즉 <code class="notion-inline-code">pushState</code>가 여러번 적용된 것처럼 동작한다. 배포 환경에서는 문제가 없다는 점이 특이하다. </div><div class="notion-text notion-block-142703ac7df04470af73063fd78e98ce">해결을 위해 다른 분이 블로그에 활용한 isClickedFirst로 한번만 현재 페이지의 정보를 스택에 넣는 방법을 채택했다.</div><h4 class="notion-h notion-h3 notion-h-indent-2 notion-block-6ca3e897a8b74ee581cf4281a6ac3616" data-id="6ca3e897a8b74ee581cf4281a6ac3616"><span><div id="6ca3e897a8b74ee581cf4281a6ac3616" class="notion-header-anchor"></div><a class="notion-hash-link" href="#6ca3e897a8b74ee581cf4281a6ac3616" title="코드"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">코드</span></span></h4><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-javascript">const isClickedFirst = useRef(false);

const handlePopState = useCallback(() =&gt; {
  // 페이지를 벗어나지 않아야 하는 경우
  if (isDirty &amp;&amp; !confirm(MESSAGE.CONFIRM_LEAVE)) {
    history.pushState(null, &#x27;&#x27;, &#x27;&#x27;);
    return;
  }

  history.back();
}, [isDirty]);

useEffect(() =&gt; {
  if (!isClickedFirst.current) {
    history.pushState(null, &#x27;&#x27;, &#x27;&#x27;);
    isClickedFirst.current = true;
  }
}, []);

useEffect(() =&gt; {
  window.addEventListener(&#x27;popstate&#x27;, handlePopState);
  return () =&gt; {
    window.removeEventListener(&#x27;popstate&#x27;, handlePopState);
  };
}, [handlePopState]);</code></pre><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-f6ab7be77de941cdb3a23e4a37ee2c97" data-id="f6ab7be77de941cdb3a23e4a37ee2c97"><span><div id="f6ab7be77de941cdb3a23e4a37ee2c97" class="notion-header-anchor"></div><a class="notion-hash-link" href="#f6ab7be77de941cdb3a23e4a37ee2c97" title="마치며"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">마치며</span></span></h2><div class="notion-text notion-block-941a748255b541e58473e357410313ff">글의내용들을 담은 커스텀 훅을 Form 컴포넌트에서 호출해 활용하는 방법을 채택했다.</div><div class="notion-text notion-block-9676b531310e48e397e63c793db0ebf6">App Router를 공부하면서 프로젝트에 적용하는 과정에 여러 문제들을 만나게 되는데 이슈로 등록되어 다른 개발자들의 discussion에서 여러 정보를 얻지만 이슈로 등록되지 않은 내용들도 있어 가끔 어려움을 겪는다. </div><div class="notion-text notion-block-9ad51a13e3474787b5b4f3bfd807df61">추가적으로 Page Router에서 페이지 이동을 방지하고 싶다면 아래 링크를 참고하면 좋을 것 같다.</div><div class="notion-text notion-block-97cec4e7eb0942278c8136069d1bb1dc"><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://medium.com/@codingbeautytutorials/nextjs-detect-route-change-bb8e6c316d1">https://medium.com/@codingbeautytutorials/nextjs-detect-route-change-bb8e6c316d1</a></div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-88a51eca06794ba39cf8a541fe6d7c01" data-id="88a51eca06794ba39cf8a541fe6d7c01"><span><div id="88a51eca06794ba39cf8a541fe6d7c01" class="notion-header-anchor"></div><a class="notion-hash-link" href="#88a51eca06794ba39cf8a541fe6d7c01" title="참조"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">참조</span></span></h3><div class="notion-text notion-block-423ba3bd165f4f7987a3838d255fe451"><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/vercel/next.js/discussions/41934#discussioncomment-8174608">https://github.com/vercel/next.js/discussions/41934#discussioncomment-8174608</a></div><div class="notion-text notion-block-a6bee84c79d14dd4bd893c45dec42622"><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://yunjeoming.dev/blog/detect-page-navigation-in-next14">https://yunjeoming.dev/blog/detect-page-navigation-in-next14</a></div><div class="notion-text notion-block-ed21392d0f994cbf928bedf844a22dc9"><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://velog.io/@rkd028/React-Javascript-%EB%92%A4%EB%A1%9C%EA%B0%80%EA%B8%B0-%EB%A7%89%EA%B8%B0">https://velog.io/@rkd028/React-Javascript-뒤로가기-막기</a></div></main><hr class="border-neutral-300 dark:border-neutral-500 border-1 w-full my-6"/><section class="mb-12 flex justify-between px-2"><div></div><div><a class="text-mute hover:text-primary inline-block transition-all" href="/blog/websocket-with-nextjs"><div class="flex items-center gap-1 text-xs justify-end"><span>Next</span><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="14" width="14" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"></path><path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z"></path></g></svg></div><span class="tracking-tighter">WebSocket 활용기 with Next.js, Socket.io</span></a></div></section><section></section></article><hr class="border-neutral-300 dark:border-neutral-500 border-1 w-full my-8"/><footer class="mb-10 flex flex-col items-end text-sm"><div class="mx-auto mb-2 flex gap-2 text-xl sm:mx-0"><a target="_blank" href="mailto:minjae7728@gmail.com" rel="noreferrer" aria-label="check author&#x27;s email" class="text-tertiary hover:text-primary"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M24 4.5v15c0 .85-.65 1.5-1.5 1.5H21V7.387l-9 6.463-9-6.463V21H1.5C.649 21 0 20.35 0 19.5v-15c0-.425.162-.8.431-1.068C.7 3.16 1.076 3 1.5 3H2l10 7.25L22 3h.5c.425 0 .8.162 1.069.432.27.268.431.643.431 1.068z"></path></svg></a><a target="_blank" href="https://github.com/mxx-kor" rel="noreferrer" aria-label="check author&#x27;s github" class="text-tertiary hover:text-primary"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a target="_blank" href="https://www.linkedin.com/in/%EB%AF%BC%EC%9E%AC-%EA%B9%80-35a409204/" rel="noreferrer" aria-label="check author&#x27;s linkedin" class="text-tertiary hover:text-primary"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a></div><p class="text-tertiary mx-auto sm:mx-0"><span>© </span><a class="hover:text-primary hover:underline" href="/about">Minjae Kim</a><span> Powered by </span><a target="_blank" href="https://nextjs.org/" rel="noreferrer" class="hover:text-primary hover:underline">Next.js</a><span>, </span><a target="_blank" href="https://pages.github.com/" rel="noreferrer" class="hover:text-primary hover:underline">Github Pages</a><span>, </span><a target="_blank" href="https://developers.notion.com/" rel="noreferrer" class="hover:text-primary hover:underline">Notion API</a></p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"prevPost":null,"post":{"object":"page","id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","created_time":"2024-02-19T12:22:00.000Z","last_edited_time":"2024-02-20T06:59:00.000Z","created_by":{"object":"user","id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6"},"last_edited_by":{"object":"user","id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6"},"cover":null,"icon":null,"parent":{"type":"database_id","database_id":"f49dbc55-2ac0-4786-b9e3-4b9522a6a294"},"archived":false,"properties":{"Main":{"id":"H%60Il","type":"checkbox","checkbox":false},"Summary":{"id":"LkE%3E","type":"rich_text","rich_text":[{"type":"text","text":{"content":"페이지 이동을 감지하고 confirm창을 띄우는기 위해 적용한 내용을 다룹니다.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"페이지 이동을 감지하고 confirm창을 띄우는기 위해 적용한 내용을 다룹니다.","href":null}]},"Tags":{"id":"Q%5B~X","type":"multi_select","multi_select":[{"id":"036731bb-69f1-47c2-899c-76ebd0c4c21d","name":"Next.js","color":"purple"}]},"Title":{"id":"%5BeXF","type":"rich_text","rich_text":[{"type":"text","text":{"content":"Next.js App Router 페이지 이동 막기","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Next.js App Router 페이지 이동 막기","href":null}]},"Slug":{"id":"title","type":"title","title":[{"type":"text","text":{"content":"confirm-leaving-page","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"confirm-leaving-page","href":null}]}},"url":"https://www.notion.so/confirm-leaving-page-dfe0359104f54ff9a101b551112d7aa0","public_url":"https://longhaired-way-a70.notion.site/confirm-leaving-page-dfe0359104f54ff9a101b551112d7aa0","request_id":"3cc3064b-fa50-4351-8c9b-103662e9d364"},"nextPost":{"object":"page","id":"1470f218-8382-4dfb-bd46-defda19e2bda","created_time":"2023-12-31T07:51:00.000Z","last_edited_time":"2024-02-19T12:21:00.000Z","created_by":{"object":"user","id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6"},"last_edited_by":{"object":"user","id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6"},"cover":null,"icon":null,"parent":{"type":"database_id","database_id":"f49dbc55-2ac0-4786-b9e3-4b9522a6a294"},"archived":false,"properties":{"Main":{"id":"H%60Il","type":"checkbox","checkbox":true},"Summary":{"id":"LkE%3E","type":"rich_text","rich_text":[{"type":"text","text":{"content":"서버 구축 없이 Next.js로 리얼 타임 채팅 토이 프로젝트 구현기","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"서버 구축 없이 Next.js로 리얼 타임 채팅 토이 프로젝트 구현기","href":null}]},"Tags":{"id":"Q%5B~X","type":"multi_select","multi_select":[{"id":"036731bb-69f1-47c2-899c-76ebd0c4c21d","name":"Next.js","color":"purple"},{"id":"2cfb94f8-487f-4e6a-9389-2485549661fe","name":"websocket","color":"green"}]},"Title":{"id":"%5BeXF","type":"rich_text","rich_text":[{"type":"text","text":{"content":"WebSocket 활용기 with Next.js, Socket.io","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"WebSocket 활용기 with Next.js, Socket.io","href":null}]},"Slug":{"id":"title","type":"title","title":[{"type":"text","text":{"content":"websocket-with-nextjs","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"websocket-with-nextjs","href":null}]}},"url":"https://www.notion.so/websocket-with-nextjs-1470f21883824dfbbd46defda19e2bda","public_url":"https://longhaired-way-a70.notion.site/websocket-with-nextjs-1470f21883824dfbbd46defda19e2bda"},"recordMap":{"block":{"dfe03591-04f5-4ff9-a101-b551112d7aa0":{"value":{"id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","version":1579,"type":"page","properties":{"LkE\u003e":[["페이지 이동을 감지하고 confirm창을 띄우는기 위해 적용한 내용을 다룹니다."]],"Q[~X":[["Next.js"]],"[eXF":[["Next.js App Router 페이지 이동 막기"]],"title":[["confirm-leaving-page"]]},"content":["adf5980b-1bbd-45e9-af3a-f37973c6e7d7","95a29c0b-5479-4d41-bae0-f495a688a6a4","4fe608c2-ad02-467f-b9c6-9db11ce05673","0dd7b966-cb27-459b-8927-a1ebfda438b8","c4a14620-8070-4ba5-ab39-67549d7c835c","3fe164a1-09f1-4ce0-870a-b3b677c9098b","f18f6256-b315-44bb-a134-717f9b0b2fd3","c86a5d15-06a7-4638-8990-db1c3b75fdad","8e2e66c4-d69b-44ef-aef4-1ec3b78094a9","817e3116-a80b-403f-9baf-90bc90fecf70","9a02f087-2ab5-4755-99d7-44af6f15e8b3","5c99463d-49e6-4cff-a0ff-6c2a44864f00","e44e9e4a-39c1-4052-bb79-d217ec698444","a9d055fb-52d8-4a68-ad0b-660f744e9f82","6b17edb4-d61b-4921-a490-36f6c85f6d7b","3cd2dd78-b9df-46bf-8b6b-af6e8a631deb","123d1dd1-265b-4dc7-8ff7-c23aaf15af3f","b3855b9d-e9bc-4698-b714-c8c9b92c2c3f","4f5efa4b-2266-40b6-82d9-ae5753beca49","38ad374a-f25b-495a-ae09-e5f34d5b443b","c98f8987-4686-45eb-9f1a-510ef2624cf2","011d3072-d594-4a96-85f5-95805e8097b5","e7eca33f-d253-4dae-862a-311d2e8a13cb","aabf921c-42aa-404d-9376-c3c242ed7400","51344031-9a89-4a3b-8e9c-f7fd8d221aaf","142703ac-7df0-4470-af73-063fd78e98ce","6ca3e897-a8b7-4ee5-81cf-4281a6ac3616","ae8b1af3-3303-4ae4-b571-5d3a40712adf","f6ab7be7-7de9-41cd-b3a2-3e4a37ee2c97","941a7482-55b5-41e5-8473-e357410313ff","9676b531-310e-48e3-97e6-3c793db0ebf6","9ad51a13-e347-4787-b5b4-f3bfd807df61","97cec4e7-eb09-4227-8c81-36069d1bb1dc","88a51eca-0679-4ba3-9cf8-a541fe6d7c01","423ba3bd-165f-4f79-87a3-838d255fe451","a6bee84c-79d1-4dd4-bd89-3c45dec42622","ed21392d-0f99-4cbf-928b-edf844a22dc9"],"created_time":1708345320708,"last_edited_time":1708412350987,"parent_id":"77251464-f92c-498c-8ec6-b1ee5950601b","parent_table":"collection","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"f49dbc55-2ac0-4786-b9e3-4b9522a6a294":{"value":{"id":"f49dbc55-2ac0-4786-b9e3-4b9522a6a294","version":117,"type":"collection_view","view_ids":["2943edd6-04c4-497c-9810-5b340d73025b"],"collection_id":"77251464-f92c-498c-8ec6-b1ee5950601b","format":{"collection_pointer":{"id":"77251464-f92c-498c-8ec6-b1ee5950601b","table":"collection","spaceId":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"}},"permissions":[{"role":"editor","type":"user_permission","user_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6"},{"role":"reader","type":"public_permission","added_timestamp":1688473010972,"allow_duplicate":false},{"type":"restricted_permission"},{"role":{"read_content":true},"type":"bot_permission","bot_id":"95ebcfc3-c78e-4f51-8a1d-715c5aee0b0b","parent_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e","parent_table":"space"}],"created_time":1688471518135,"last_edited_time":1708345320708,"parent_id":"6da363e3-8c9b-4c93-a407-b2dfdda51a20","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"adf5980b-1bbd-45e9-af3a-f37973c6e7d7":{"value":{"id":"adf5980b-1bbd-45e9-af3a-f37973c6e7d7","version":2619,"type":"text","properties":{"title":[["프로젝트에 에디터를 적용하고 사용자가 페이지를 이동할 때 작성한 내용이 날아가면 허무함을 느낄 것 같아 페이지 이동 전에 confirm창을 띄워주고 싶었다. isDirty(boolean) 값을 활용해서 조건에 따라 바로 이동시키거나 확인을 거치는 기능을 구현했다."]]},"created_time":1708345761923,"last_edited_time":1708374720489,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"95a29c0b-5479-4d41-bae0-f495a688a6a4":{"value":{"id":"95a29c0b-5479-4d41-bae0-f495a688a6a4","version":264,"type":"text","properties":{"title":[["검색 결과 Page Router를 활용할 때에는 "],["useRouter",[["c"]]],["("],["next/router",[["c"]]],[")를 이용해 "],["routeChangeStart",[["c"]]],["와 같은 이벤트들을 사용할 수 있었으나 13버전 이후의 App Router를 활용할 때에는 같은 "],["useRouter",[["c"]]],["이지만 (Page Router도 아직 활용할 수 있기 때문에) "],["next/navigation",[["c"]]],["을 활용해야 한다.  그렇지 않으면  "],["Uncaught Error: NextRouter was not mounted.",[["c"]]],["와 검색해도 "],["불친절한 설명",[["a","https://nextjs.org/docs/messages/next-router-not-mounted"]]],["을 보게 된다."]]},"created_time":1708357007725,"last_edited_time":1708357073129,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"4fe608c2-ad02-467f-b9c6-9db11ce05673":{"value":{"id":"4fe608c2-ad02-467f-b9c6-9db11ce05673","version":80,"type":"text","properties":{"title":[["이를 해결한 과정과 무섭게 들리는 “막기” 보다는 이동 전에 확인 받기 기능을 구현하며 작성한 내용에 대해 다뤄보고자 한다."]]},"created_time":1708356365692,"last_edited_time":1708357081734,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"0dd7b966-cb27-459b-8927-a1ebfda438b8":{"value":{"id":"0dd7b966-cb27-459b-8927-a1ebfda438b8","version":32,"type":"image","properties":{"size":[["15.7KB"]],"title":[["스크린샷 2024-02-19 오후 9.32.26.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/7b0c1ebf-29f7-4bde-9810-55e79a3d582e/0b008854-a087-4fe1-9fce-773ab38425d2/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-02-19_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.32.26.png"]]},"format":{"block_width":336,"block_height":145,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/7b0c1ebf-29f7-4bde-9810-55e79a3d582e/0b008854-a087-4fe1-9fce-773ab38425d2/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-02-19_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.32.26.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.33564814814814814,"block_preserve_scale":true},"created_time":1708345965892,"last_edited_time":1708359683818,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"file_ids":["0b008854-a087-4fe1-9fce-773ab38425d2"],"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"c4a14620-8070-4ba5-ab39-67549d7c835c":{"value":{"id":"c4a14620-8070-4ba5-ab39-67549d7c835c","version":19,"type":"text","created_time":1708346042761,"last_edited_time":1708356422232,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"3fe164a1-09f1-4ce0-870a-b3b677c9098b":{"value":{"id":"3fe164a1-09f1-4ce0-870a-b3b677c9098b","version":176,"type":"header","properties":{"title":[["어떤 동작을 감지해야 할까?"]]},"created_time":1708346042761,"last_edited_time":1708367848734,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"f18f6256-b315-44bb-a134-717f9b0b2fd3":{"value":{"id":"f18f6256-b315-44bb-a134-717f9b0b2fd3","version":1073,"type":"text","properties":{"title":[["이미 해당 기능(이동 전 확인)이 존재하기 때문에 직접 구현할 수 있을 것이라고 생각했다. 구현 과정에서 크게 3가지 동작으로 분리할 수 있고 대비가 필요하다는 점을 확인했다."]]},"created_time":1708356817692,"last_edited_time":1708374891588,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"c86a5d15-06a7-4638-8990-db1c3b75fdad":{"value":{"id":"c86a5d15-06a7-4638-8990-db1c3b75fdad","version":409,"type":"numbered_list","properties":{"title":[["닫기, 새로고침, "],["a",[["c"]]],[" 태그 이동 (페이지 외로 이동)"]]},"created_time":1708356482892,"last_edited_time":1708358692424,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"8e2e66c4-d69b-44ef-aef4-1ec3b78094a9":{"value":{"id":"8e2e66c4-d69b-44ef-aef4-1ec3b78094a9","version":230,"type":"numbered_list","properties":{"title":[["router.push()",[["c"]]],[",  "],["Link",[["c"]]],[" 태그 (페이지 내로 이동)"]]},"created_time":1708356508669,"last_edited_time":1708358694474,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"817e3116-a80b-403f-9baf-90bc90fecf70":{"value":{"id":"817e3116-a80b-403f-9baf-90bc90fecf70","version":108,"type":"numbered_list","properties":{"title":[["뒤로 가기 버튼"]]},"created_time":1708356546530,"last_edited_time":1708360045883,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"9a02f087-2ab5-4755-99d7-44af6f15e8b3":{"value":{"id":"9a02f087-2ab5-4755-99d7-44af6f15e8b3","version":1944,"type":"text","properties":{"title":[["필요한 예방 동작에 따라 작성해야 하는 함수를 확인하면 좋을 것 같다. 추후 Next의 업데이트에 따라 Page router의 "],["routeChangeStart",[["c"]]],[" 이벤트와 비슷한 내용이 추가될 수 있지만 서버 컴포넌트가 기본인 설정이라 어려움이 있을 것이라고 추론하게 되었다."]]},"created_time":1708346042761,"last_edited_time":1708357302422,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"5c99463d-49e6-4cff-a0ff-6c2a44864f00":{"value":{"id":"5c99463d-49e6-4cff-a0ff-6c2a44864f00","version":402,"type":"sub_header","properties":{"title":[["페이지 이동 (내부, 외부 통합)"]]},"created_time":1708346042761,"last_edited_time":1708359926957,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"e44e9e4a-39c1-4052-bb79-d217ec698444":{"value":{"id":"e44e9e4a-39c1-4052-bb79-d217ec698444","version":681,"type":"text","properties":{"title":[["내부, 외부(1번, 2번)를 통합해서 페이지 이동을 감지할 수 있는 함수로 "],["이 글을 확인",[["a","https://github.com/vercel/next.js/discussions/41934#discussioncomment-8174608"]]],["했다. "]]},"created_time":1708359812146,"last_edited_time":1708367997472,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"a9d055fb-52d8-4a68-ad0b-660f744e9f82":{"value":{"id":"a9d055fb-52d8-4a68-ad0b-660f744e9f82","version":758,"type":"text","properties":{"title":[["onbeforeunload",[["c"]]],[" 이벤트는 외부로의(닫기, 새로고침, "],["a",[["c"]]],[" 태그) 이동을, "],["router.push",[["c"]]],[" 로직을 수정하는 방법은 내부로의 이동을 감지하고 예방할 수 있다."]]},"created_time":1708367719956,"last_edited_time":1708372286401,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"6b17edb4-d61b-4921-a490-36f6c85f6d7b":{"value":{"id":"6b17edb4-d61b-4921-a490-36f6c85f6d7b","version":2660,"type":"text","properties":{"title":[["내부 이동은 글 서론의 사진과 같은 보편적인 confirm 통해서, 외부로 이동하는 경우 Chrome에서 제공하는 못생긴(?) confirm 창을 확인할 수 있다.  "]]},"created_time":1708357446887,"last_edited_time":1708372329470,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"3cd2dd78-b9df-46bf-8b6b-af6e8a631deb":{"value":{"id":"3cd2dd78-b9df-46bf-8b6b-af6e8a631deb","version":96,"type":"text","properties":{"title":[["a",[["c"]]],[" 태그도 페이지를 벗어나는 경우에 포함되므로 대비할 수 있고 여기서 확인한 내용은 "],["Link",[["c"]]],[" 태그와 같은 경우는 "],["router.push()",[["c"]]],["처럼 처리되는 점을 알게 되었다. "],["알고 싶지 않았으나 Link는 confirm을 띄우지 않아서 알게되었다.",[["s"]]]]},"created_time":1708359785550,"last_edited_time":1708367717235,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"123d1dd1-265b-4dc7-8ff7-c23aaf15af3f":{"value":{"id":"123d1dd1-265b-4dc7-8ff7-c23aaf15af3f","version":43,"type":"image","properties":{"size":[["20.6KB"]],"title":[["스크린샷 2024-02-20 오전 12.44.46.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/7b0c1ebf-29f7-4bde-9810-55e79a3d582e/55af6853-2c17-449c-b8a8-54e5ee463042/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-02-20_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_12.44.46.png"]]},"format":{"block_width":192,"block_height":189,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/7b0c1ebf-29f7-4bde-9810-55e79a3d582e/55af6853-2c17-449c-b8a8-54e5ee463042/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-02-20_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_12.44.46.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.7620967741935484,"block_preserve_scale":true},"created_time":1708357494582,"last_edited_time":1708359683818,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"file_ids":["55af6853-2c17-449c-b8a8-54e5ee463042"],"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"b3855b9d-e9bc-4698-b714-c8c9b92c2c3f":{"value":{"id":"b3855b9d-e9bc-4698-b714-c8c9b92c2c3f","version":27,"type":"sub_sub_header","properties":{"title":[["코드"]]},"created_time":1708346042761,"last_edited_time":1708357855693,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"4f5efa4b-2266-40b6-82d9-ae5753beca49":{"value":{"id":"4f5efa4b-2266-40b6-82d9-ae5753beca49","version":494,"type":"code","properties":{"title":[["const beforeUnloadHandler = useCallback(\n  (event: BeforeUnloadEvent) =\u003e {\n    // 페이지를 벗어나지 않아야 하는 경우\n    if (isDirty) {\n      event.preventDefault();\n      event.returnValue = true;\n    }\n  },\n  [isDirty],\n);\n\nuseEffect(() =\u003e {\n  const originalPush = router.push;\n  const newPush = (\n    href: string,\n    options?: NavigateOptions | undefined,\n  ): void =\u003e {\n    // 페이지를 벗어나지 않아야 하는 경우\n    if (isDirty \u0026\u0026 href === '/' \u0026\u0026 !confirm(MESSAGE.CONFIRM_LEAVE)) {\n      return;\n    }\n\n    originalPush(href, options);\n    return;\n  };\n  router.push = newPush;\n  window.onbeforeunload = beforeUnloadHandler;\n  return () =\u003e {\n    router.push = originalPush;\n    window.onbeforeunload = null;\n  };\n}, [isDirty, router, beforeUnloadHandler]);"]],"language":[["JavaScript"]]},"created_time":1708357429712,"last_edited_time":1708374761888,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"38ad374a-f25b-495a-ae09-e5f34d5b443b":{"value":{"id":"38ad374a-f25b-495a-ae09-e5f34d5b443b","version":86,"type":"sub_header","properties":{"title":[["뒤로 가기 버튼"]]},"created_time":1708346042761,"last_edited_time":1708360041697,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"c98f8987-4686-45eb-9f1a-510ef2624cf2":{"value":{"id":"c98f8987-4686-45eb-9f1a-510ef2624cf2","version":639,"type":"text","properties":{"title":[["해당 경우를 처리하는 것이 가장 복잡했다. 크게 두가지 이유가 있었다."]]},"created_time":1708372123294,"last_edited_time":1708372473556,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"011d3072-d594-4a96-85f5-95805e8097b5":{"value":{"id":"011d3072-d594-4a96-85f5-95805e8097b5","version":968,"type":"numbered_list","properties":{"title":[["popstate 이벤트는 실행취소가 불가능하다. 즉 뒤로 가기 버튼을 누른 경우  history 스택에서 현재 페이지가 빠지고 이를 막을 수 없다."]]},"created_time":1708372476836,"last_edited_time":1708372798252,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"e7eca33f-d253-4dae-862a-311d2e8a13cb":{"value":{"id":"e7eca33f-d253-4dae-862a-311d2e8a13cb","version":877,"type":"numbered_list","properties":{"title":[["컴포넌트 마운트 시점에 현재 페이지의 정보를 저장하기 위해 useEffect에  "],["history.pushState",[["c"]]],["를 사용하는데 이 동작의 예측이 어렵다."]]},"created_time":1708372642111,"last_edited_time":1708374045729,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"aabf921c-42aa-404d-9376-c3c242ed7400":{"value":{"id":"aabf921c-42aa-404d-9376-c3c242ed7400","version":1021,"type":"text","properties":{"title":[["1번을 해결하기 위해서 이미 history에서 빠진 현재 페이지를 다시 넣어야 하는데  "],["go(+1)",[["c"]]],["를 사용하는 경우 "],["popstate",[["c"]]],[" 이벤트를 다시 발생시켜 무한 confirm이 된다. 이벤트를 발생시키지 않는 "],["pushState",[["c"]]],[" 또는"],["replaceState",[["c"]]],["사용해야 한다."]]},"created_time":1708372473556,"last_edited_time":1708373322197,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"51344031-9a89-4a3b-8e9c-f7fd8d221aaf":{"value":{"id":"51344031-9a89-4a3b-8e9c-f7fd8d221aaf","version":2152,"type":"text","properties":{"title":[["2번은 개발 환경에서만 발생하는 문제로 해당 로직을 사용하는 컴포넌트가 리렌더링 되는 것과 관련된 이슈라고 생각된다. 즉 "],["pushState",[["c"]]],["가 여러번 적용된 것처럼 동작한다. 배포 환경에서는 문제가 없다는 점이 특이하다. "]]},"created_time":1708367871015,"last_edited_time":1708374216188,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"142703ac-7df0-4470-af73-063fd78e98ce":{"value":{"id":"142703ac-7df0-4470-af73-063fd78e98ce","version":283,"type":"text","properties":{"title":[["해결을 위해 다른 분이 블로그에 활용한 isClickedFirst로 한번만 현재 페이지의 정보를 스택에 넣는 방법을 채택했다."]]},"created_time":1708374216188,"last_edited_time":1708374270922,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"6ca3e897-a8b7-4ee5-81cf-4281a6ac3616":{"value":{"id":"6ca3e897-a8b7-4ee5-81cf-4281a6ac3616","version":125,"type":"sub_sub_header","properties":{"title":[["코드"]]},"created_time":1708358188833,"last_edited_time":1708360111146,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"ae8b1af3-3303-4ae4-b571-5d3a40712adf":{"value":{"id":"ae8b1af3-3303-4ae4-b571-5d3a40712adf","version":45,"type":"code","properties":{"title":[["const isClickedFirst = useRef(false);\n\nconst handlePopState = useCallback(() =\u003e {\n  // 페이지를 벗어나지 않아야 하는 경우\n  if (isDirty \u0026\u0026 !confirm(MESSAGE.CONFIRM_LEAVE)) {\n    history.pushState(null, '', '');\n    return;\n  }\n\n  history.back();\n}, [isDirty]);\n\nuseEffect(() =\u003e {\n  if (!isClickedFirst.current) {\n    history.pushState(null, '', '');\n    isClickedFirst.current = true;\n  }\n}, []);\n\nuseEffect(() =\u003e {\n  window.addEventListener('popstate', handlePopState);\n  return () =\u003e {\n    window.removeEventListener('popstate', handlePopState);\n  };\n}, [handlePopState]);"]],"language":[["JavaScript"]]},"created_time":1708360114374,"last_edited_time":1708374749546,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"f6ab7be7-7de9-41cd-b3a2-3e4a37ee2c97":{"value":{"id":"f6ab7be7-7de9-41cd-b3a2-3e4a37ee2c97","version":42,"type":"header","properties":{"title":[["마치며"]]},"created_time":1708374319820,"last_edited_time":1708374929823,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"941a7482-55b5-41e5-8473-e357410313ff":{"value":{"id":"941a7482-55b5-41e5-8473-e357410313ff","version":177,"type":"text","properties":{"title":[["글의내용들을 담은 커스텀 훅을 Form 컴포넌트에서 호출해 활용하는 방법을 채택했다."]]},"created_time":1708374319820,"last_edited_time":1708412353574,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"9676b531-310e-48e3-97e6-3c793db0ebf6":{"value":{"id":"9676b531-310e-48e3-97e6-3c793db0ebf6","version":5,"type":"text","properties":{"title":[["App Router를 공부하면서 프로젝트에 적용하는 과정에 여러 문제들을 만나게 되는데 이슈로 등록되어 다른 개발자들의 discussion에서 여러 정보를 얻지만 이슈로 등록되지 않은 내용들도 있어 가끔 어려움을 겪는다. "]]},"created_time":1708374319820,"last_edited_time":1708374943130,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"9ad51a13-e347-4787-b5b4-f3bfd807df61":{"value":{"id":"9ad51a13-e347-4787-b5b4-f3bfd807df61","version":402,"type":"text","properties":{"title":[["추가적으로 Page Router에서 페이지 이동을 방지하고 싶다면 아래 링크를 참고하면 좋을 것 같다."]]},"created_time":1708374624393,"last_edited_time":1708374968550,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"97cec4e7-eb09-4227-8c81-36069d1bb1dc":{"value":{"id":"97cec4e7-eb09-4227-8c81-36069d1bb1dc","version":4,"type":"text","properties":{"title":[["https://medium.com/@codingbeautytutorials/nextjs-detect-route-change-bb8e6c316d1",[["a","https://medium.com/@codingbeautytutorials/nextjs-detect-route-change-bb8e6c316d1"]]]]},"created_time":1708346042761,"last_edited_time":1708358157063,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"88a51eca-0679-4ba3-9cf8-a541fe6d7c01":{"value":{"id":"88a51eca-0679-4ba3-9cf8-a541fe6d7c01","version":68,"type":"sub_header","properties":{"title":[["참조"]]},"created_time":1708374971392,"last_edited_time":1708374979427,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"423ba3bd-165f-4f79-87a3-838d255fe451":{"value":{"id":"423ba3bd-165f-4f79-87a3-838d255fe451","version":5,"type":"text","properties":{"title":[["https://github.com/vercel/next.js/discussions/41934#discussioncomment-8174608",[["a","https://github.com/vercel/next.js/discussions/41934#discussioncomment-8174608"]]]]},"created_time":1708375015649,"last_edited_time":1708375015845,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"a6bee84c-79d1-4dd4-bd89-3c45dec42622":{"value":{"id":"a6bee84c-79d1-4dd4-bd89-3c45dec42622","version":12,"type":"text","properties":{"title":[["https://yunjeoming.dev/blog/detect-page-navigation-in-next14",[["a","https://yunjeoming.dev/blog/detect-page-navigation-in-next14"]]]]},"created_time":1708374979734,"last_edited_time":1708374991373,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"},"ed21392d-0f99-4cbf-928b-edf844a22dc9":{"value":{"id":"ed21392d-0f99-4cbf-928b-edf844a22dc9","version":5,"type":"text","properties":{"title":[["https://velog.io/@rkd028/React-Javascript-뒤로가기-막기",[["a","https://velog.io/@rkd028/React-Javascript-%EB%92%A4%EB%A1%9C%EA%B0%80%EA%B8%B0-%EB%A7%89%EA%B8%B0"]]]]},"created_time":1708358155097,"last_edited_time":1708375030476,"parent_id":"dfe03591-04f5-4ff9-a101-b551112d7aa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","last_edited_by_table":"notion_user","last_edited_by_id":"b3d94135-cbdf-428e-a8a5-8801e91b70e6","space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"}},"collection":{"77251464-f92c-498c-8ec6-b1ee5950601b":{"value":{"id":"77251464-f92c-498c-8ec6-b1ee5950601b","version":82,"name":[["포스팅"]],"schema":{"H`Il":{"name":"Main","type":"checkbox"},"LkE\u003e":{"name":"Summary","type":"text"},"Q[~X":{"name":"Tags","type":"multi_select","options":[{"id":"036731bb-69f1-47c2-899c-76ebd0c4c21d","color":"purple","value":"Next.js"},{"id":"e30a7966-4eb2-45a7-b1f3-314cd0d2c5b0","color":"default","value":"TailwindCSS"},{"id":"f1dcbd9b-69e5-4564-99d8-b65fb51b0090","color":"gray","value":"브라우저"},{"id":"dcc8bb71-28e8-4ef7-8f0b-1922c0daf129","color":"brown","value":"React"},{"id":"3ee98ab1-0b9d-430b-93da-cf2a2ca2f036","color":"pink","value":"lighthouse"},{"id":"eef9ed94-f853-4b17-a817-2ac412387220","color":"orange","value":"회고"},{"id":"15f9af90-4308-4dba-acf4-1565f1b3108b","color":"red","value":"팀 프로젝트"},{"id":"75511c74-11a3-492e-ac8a-8150f5e072b2","color":"green","value":"CS"},{"id":"7982bf8b-df3e-4377-b1b9-84dc37c9ec2b","color":"default","value":"개인 프로젝트"},{"id":"73ce9024-d165-44c8-8821-c0808ab04cb9","color":"yellow","value":"프론트엔드"},{"id":"4865bdba-a3d4-48bd-83a7-7458b532dc9e","color":"default","value":"metrics"},{"id":"755884b4-bddc-4cb4-9bc8-84d0d5d29955","color":"blue","value":"flushSync"},{"id":"69e1ad87-e25d-44b0-865a-be86ed1589c4","color":"blue","value":"JavaScript"},{"id":"b7b6126d-26cf-4a98-8057-873aad8b6cd4","color":"pink","value":"Notion"},{"id":"2bcdc16c-6690-496f-944a-f21d1db899b6","color":"blue","value":"module"},{"id":"d5eb76a7-b5a6-4de7-976f-fa76f907595d","color":"gray","value":"함수형 프로그래밍"},{"id":"2cfb94f8-487f-4e6a-9389-2485549661fe","color":"green","value":"websocket"}]},"[eXF":{"name":"Title","type":"text"},"title":{"name":"Slug","type":"title"}},"format":{"property_visibility":[{"property":"Q[~X","visibility":"hide"},{"property":"H`Il","visibility":"hide"},{"property":"LkE\u003e","visibility":"hide"},{"property":"[eXF","visibility":"hide"}],"collection_page_properties":[{"visible":true,"property":"Q[~X"}]},"parent_id":"f49dbc55-2ac0-4786-b9e3-4b9522a6a294","parent_table":"block","alive":true,"migrated":true,"space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e","deleted_schema":{"\u003eHgf":{"name":"AI 요약","type":"text","ai_inference":{"type":"summarize","auto_update_on_edit":false}}}},"role":"reader"}},"collection_view":{"2943edd6-04c4-497c-9810-5b340d73025b":{"value":{"id":"2943edd6-04c4-497c-9810-5b340d73025b","version":37,"type":"table","format":{"table_wrap":true,"table_properties":[{"width":77,"visible":true,"property":"H`Il"},{"width":167,"visible":true,"property":"title"},{"width":200,"visible":true,"property":"[eXF"},{"width":200,"visible":true,"property":"Q[~X"},{"width":200,"visible":true,"property":"LkE\u003e"}],"collection_pointer":{"id":"77251464-f92c-498c-8ec6-b1ee5950601b","table":"collection","spaceId":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"table_frozen_column_index":-1},"parent_id":"f49dbc55-2ac0-4786-b9e3-4b9522a6a294","parent_table":"block","alive":true,"page_sort":["df5fe329-5fa8-4852-826b-441b0ca8ed95","a92f06fe-b685-4060-8fe8-6e532683cde4","f32de19b-da8d-49cb-84ce-e509b82600ce","bd0a0d15-7c73-440d-a557-47e29417f68a","08cc1d27-2908-4a9b-a1cc-38db1009da25","d9717ebe-4fc8-4fd5-9336-393fabc3574b","876b9a0c-1d3d-486b-8f7e-2e550187fbcc","0b1f8158-2ece-49da-9c00-f95c4b657a41","b3fdc8c9-3b8f-48bd-91af-5ea70ce1193d","5973748b-61e7-4d92-999e-ad082353606f","6da84544-75f7-436a-8228-8df0315ac183","549d7ee1-51ab-445e-92a9-5d9851ebd792","adc18887-c0d6-4db5-908c-873d849a02ef","babf25bd-0c2c-43d8-98d9-b85ecadd83dc","55e39890-1d23-42ad-aa73-f4fe7d545329","d370f701-4efb-4e4a-8ed5-bdcdec7a1738","6da47cc3-3384-4d52-8b34-e0cf97e5caf9","2f519016-0752-47a6-9142-08cb1d04bd10","2f3ab74d-072f-40cc-a37f-55fe452f2b78","1470f218-8382-4dfb-bd46-defda19e2bda","dfe03591-04f5-4ff9-a101-b551112d7aa0","ca40eb29-4355-4fc0-9996-a1f2df00ae3b","11ad81a4-5904-437c-a419-80ba4058c34a","55776695-9cf1-47ac-ad84-8f83bd2ecf3c","be15ca6b-9722-434e-8904-9474982454fd"],"space_id":"7b0c1ebf-29f7-4bde-9810-55e79a3d582e"},"role":"reader"}},"space":{},"notion_user":{},"collection_query":{},"signed_urls":{}},"tableOfContents":[{"id":"3fe164a1-09f1-4ce0-870a-b3b677c9098b","type":"header","text":"어떤 동작을 감지해야 할까?","indentLevel":0},{"id":"5c99463d-49e6-4cff-a0ff-6c2a44864f00","type":"sub_header","text":"페이지 이동 (내부, 외부 통합)","indentLevel":1},{"id":"b3855b9d-e9bc-4698-b714-c8c9b92c2c3f","type":"sub_sub_header","text":"코드","indentLevel":2},{"id":"38ad374a-f25b-495a-ae09-e5f34d5b443b","type":"sub_header","text":"뒤로 가기 버튼","indentLevel":1},{"id":"6ca3e897-a8b7-4ee5-81cf-4281a6ac3616","type":"sub_sub_header","text":"코드","indentLevel":2},{"id":"f6ab7be7-7de9-41cd-b3a2-3e4a37ee2c97","type":"header","text":"마치며","indentLevel":0},{"id":"88a51eca-0679-4ba3-9cf8-a541fe6d7c01","type":"sub_header","text":"참조","indentLevel":1}]},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"confirm-leaving-page"},"buildId":"WlhzeYVbyEpNQD72Ivis5","isFallback":false,"dynamicIds":[635,1794],"gsp":true,"scriptLoader":[]}</script></body></html>